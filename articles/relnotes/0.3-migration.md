---
title: QDK 0.3 Guia de Revisão de Línguas e Migração
description: Descreve as novas funcionalidades no Microsoft Quantum Development Kit 0.3 e como migrar os programas Q# existentes.
author: beheim
uid: microsoft.quantum.relnotes.migration-0-3
ms.author: bettina.heim@microsoft.com
ms.date: 10/29/2018
ms.topic: article
ms.openlocfilehash: df86bf163a300c1ce55d3959bd40aea3d8b8a973
ms.sourcegitcommit: 6ccea4a2006a47569c4e2c2cb37001e132f17476
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 02/28/2020
ms.locfileid: "77907737"
---
# <a name="qdk-03-language-release-notes-and-migration-guide"></a><span data-ttu-id="b1f14-103">Notas de lançamento de línguas QDK 0.3 e guia de migração</span><span class="sxs-lookup"><span data-stu-id="b1f14-103">QDK 0.3 language release notes and migration guide</span></span>

<span data-ttu-id="b1f14-104">Estamos entusiasmados por apresentar a mais recente atualização ao Kit de Desenvolvimento Quântico.</span><span class="sxs-lookup"><span data-stu-id="b1f14-104">We are excited to introduce the newest update to the Quantum Development Kit.</span></span>  <span data-ttu-id="b1f14-105">Esta página dá uma visão geral das novas funcionalidades da linguagem Q# e descreve como [migrar](#Migration) os programas Q# existentes para a nova sintaxe.</span><span class="sxs-lookup"><span data-stu-id="b1f14-105">This page gives an overview of the new Q# language features and describes how to [migrate](#Migration) existing Q# programs to the new syntax.</span></span>  <span data-ttu-id="b1f14-106">Consulte a nossa documentação completa para a descrição completa da língua Q# [aqui](xref:microsoft.quantum.language.intro).</span><span class="sxs-lookup"><span data-stu-id="b1f14-106">See our complete documentation for the full description of the Q# language [here](xref:microsoft.quantum.language.intro).</span></span>


## <a name="whats-new"></a><span data-ttu-id="b1f14-107">Novidades</span><span class="sxs-lookup"><span data-stu-id="b1f14-107">What's New</span></span> 

<span data-ttu-id="b1f14-108">A atualização 0.3 vem com uma gama de novas funcionalidades de linguagem e editor.</span><span class="sxs-lookup"><span data-stu-id="b1f14-108">The 0.3 update comes with a range of new language and editor features.</span></span>

### <a name="overview-of-features"></a><span data-ttu-id="b1f14-109">Visão geral das características</span><span class="sxs-lookup"><span data-stu-id="b1f14-109">Overview of Features</span></span>

- <span data-ttu-id="b1f14-110">Maior integração de ferramentas de desenvolvimento para Visual Studio e Visual Studio Code, incluindo:</span><span class="sxs-lookup"><span data-stu-id="b1f14-110">Enhanced development tool integration for Visual Studio and Visual Studio Code, including:</span></span>
    - <span data-ttu-id="b1f14-111">Compilação ao vivo e feedback sobre dactilografia *(também conhecido como*</span><span class="sxs-lookup"><span data-stu-id="b1f14-111">Live compilation and feedback on typing (*a.k.a.*</span></span> <span data-ttu-id="b1f14-112">sublinhando squiggly).</span><span class="sxs-lookup"><span data-stu-id="b1f14-112">squiggly underlining).</span></span>
    - <span data-ttu-id="b1f14-113">Informações sobre o hover, incluindo resumos de documentação e assinaturas de tipo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-113">Hover information including documentation summaries and type signatures.</span></span>
    - <span data-ttu-id="b1f14-114">Suporte para ir à definição.</span><span class="sxs-lookup"><span data-stu-id="b1f14-114">Support for go to definition.</span></span>
    - <span data-ttu-id="b1f14-115">Fácil navegação para nomear declarações de espaço, operação, função e tipo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-115">Easy navigation to namespace, operation, function, and type declarations.</span></span>
    - <span data-ttu-id="b1f14-116">Mensagens de diagnóstico melhoradas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-116">Improved diagnostic messages.</span></span>
- <span data-ttu-id="b1f14-117">Melhorias linguísticas</span><span class="sxs-lookup"><span data-stu-id="b1f14-117">Language improvements</span></span>
    - <span data-ttu-id="b1f14-118">Iniciais simples de qubit e tuple dentro da utilização e do empréstimo</span><span class="sxs-lookup"><span data-stu-id="b1f14-118">Single qubit and tuple initializations within using and borrowing</span></span>
    - <span data-ttu-id="b1f14-119">Desconstrução de Tuple em todas as atribuições</span><span class="sxs-lookup"><span data-stu-id="b1f14-119">Tuple deconstruction on all assignments</span></span>
    - <span data-ttu-id="b1f14-120">Iteração sobre matrizes</span><span class="sxs-lookup"><span data-stu-id="b1f14-120">Iteration over arrays</span></span>
    - <span data-ttu-id="b1f14-121">Expressões condicionais</span><span class="sxs-lookup"><span data-stu-id="b1f14-121">Conditional expressions</span></span>
    - <span data-ttu-id="b1f14-122">Abreviatura de especialização por defeito para operações</span><span class="sxs-lookup"><span data-stu-id="b1f14-122">Default-specialization abbreviation for operations</span></span>
    - <span data-ttu-id="b1f14-123">Construtores de tipo gerados automaticamente</span><span class="sxs-lookup"><span data-stu-id="b1f14-123">Auto-generated type constructors</span></span>
    - <span data-ttu-id="b1f14-124">Modificadores de expressão</span><span class="sxs-lookup"><span data-stu-id="b1f14-124">Expression modifiers</span></span>


## <a name="editor-features"></a><span data-ttu-id="b1f14-125">Características do editor</span><span class="sxs-lookup"><span data-stu-id="b1f14-125">Editor Features</span></span>

<span data-ttu-id="b1f14-126">O Quantum Development Kit inclui agora um servidor de idiomas para Q#, bem como as integrações de clientes para Visual Studio e Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="b1f14-126">The Quantum Development Kit now includes a language server for Q#, as well as the client integrations for Visual Studio and Visual Studio Code.</span></span>
<span data-ttu-id="b1f14-127">Tal permite um novo conjunto de funcionalidades do IntelliSense, juntamente com os comentários em direto sobre a escrita de sublinhados ondulados de erros e avisos.</span><span class="sxs-lookup"><span data-stu-id="b1f14-127">This enables a new set of IntelliSense features along with live feedback on typing in form of squiggly underlinings of errors and warnings.</span></span>
<span data-ttu-id="b1f14-128">Em particular, a definição é agora suportada e as informações sobre pairar são apresentadas contendo informações de tipo, bem como informações de documentar comentários.</span><span class="sxs-lookup"><span data-stu-id="b1f14-128">In particular, go to definition is now supported and hover information is displayed containing type information as well as information from documenting comments.</span></span> <span data-ttu-id="b1f14-129">Além disso, informações de símbolos sobre espaços de nomedefinidos, operações, funções e tipos estão disponíveis e permitem navegar rapidamente para declarações.</span><span class="sxs-lookup"><span data-stu-id="b1f14-129">Additionally, symbol information about defined namespaces, operations, functions, and types is available and allows to quickly navigate to declarations.</span></span>    
<span data-ttu-id="b1f14-130">Esta atualização melhora bastante as mensagens de diagnóstico em geral, com navegação fácil e intervalos precisos para diagnóstico e detalhes adicionais nas informações apresentadas durante a passagem do rato.</span><span class="sxs-lookup"><span data-stu-id="b1f14-130">This update greatly improves diagnostic messages in general, with easy navigation to and precise ranges for diagnostics and additional details in the displayed hover information.</span></span> 

<span data-ttu-id="b1f14-131">Para este lançamento 0.3, o servidor de idiomas incluído no Kit de Desenvolvimento Quântico não suporta vários espaços de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b1f14-131">For this 0.3 release, the language server included with the Quantum Development Kit does not support multiple workspaces.</span></span>
<span data-ttu-id="b1f14-132">Para trabalhar com um projeto em Código VS, abra a pasta raiz contendo o próprio projeto e todos os projetos referenciados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-132">In order to work with a project in VS Code, open the root folder containing the project itself and all referenced projects.</span></span>
<span data-ttu-id="b1f14-133">Para poder trabalhar com uma solução no Visual Studio, todos os projetos contidos na solução têm de estar na mesma pasta que a solução ou numa das suas subpastas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-133">In order to work with a solution in Visual Studio, all projects contained in the solution need to be in the same folder as the solution or in one of its subfolders.</span></span>

## <a name="language-features"></a><span data-ttu-id="b1f14-134">Características linguísticas</span><span class="sxs-lookup"><span data-stu-id="b1f14-134">Language Features</span></span>

<span data-ttu-id="b1f14-135">Em termos de características linguísticas, esta atualização unifica o tratamento de uma série de padrões linguísticos.</span><span class="sxs-lookup"><span data-stu-id="b1f14-135">In terms of language features, this update unifies the treatment of a range of language patterns.</span></span>
<span data-ttu-id="b1f14-136">Os construtores de tipos, como exemplo, são gerados para cada tipo definido pelo utilizador e podem ser parcialmente aplicados como qualquer outra função.</span><span class="sxs-lookup"><span data-stu-id="b1f14-136">Type constructors, as an example, are generated for each user defined type and can be partially applied much like any other function.</span></span>
<span data-ttu-id="b1f14-137">Outro exemplo é a desconstrução de tuple, que agora é totalmente apoiada em todas as atribuições.</span><span class="sxs-lookup"><span data-stu-id="b1f14-137">Another example is tuple deconstruction, which is now fully supported within all assignments.</span></span> <span data-ttu-id="b1f14-138">Isto inclui não só let-, mutable e set-statements, mas também a variável iteração em for-loops, bem como a atribuição de utilização e empréstimos.</span><span class="sxs-lookup"><span data-stu-id="b1f14-138">This includes not only let-, mutable-, and set-statements, but also the iteration variable in for-loops as well as using- and borrowing-allocations.</span></span> <span data-ttu-id="b1f14-139">Adicionalmente, as desconstruções parciais são recentemente suportadas com a atualização 0.3; sublinhações em desconstruções indicam partes do valor que devem ser ignorados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-139">Additionally, partial deconstructions are newly supported with the 0.3 update; underscores in deconstructions indicate parts of the value that are to be ignored.</span></span> 

<span data-ttu-id="b1f14-140">O seguinte código ilustra algumas das novas funcionalidades:</span><span class="sxs-lookup"><span data-stu-id="b1f14-140">The following code illustrates some of the new features:</span></span>
```qsharp
    let tuples = [(1, 0), (0, 1)];
    mutable res = (0, 0, 0);

    // For-loops can iterate over arrays, and can destructure tuples.
    for ((i1, i2) in tuples) {

        // Mutable assignments can now destructure and ignore parts of tuples,
        // using the same syntax as let-bindings.
        mutable (r1, r2, _) = res;
        set (r1, r2) = (r1 ||| i1, r2 &&& i2);

        let (_, _, s) = res;
        // The new conditional operator can be used inside expressions, avoiding
        // the need for extraneous if-statements.
        set res = (r1, r2, r1 == r2 ? s | s + 1);
    }
```
<span data-ttu-id="b1f14-141">A última declaração do conjunto utiliza um novo operador ternário que é introduzido com a atualização 0.3 para suportar expressões condicionais.</span><span class="sxs-lookup"><span data-stu-id="b1f14-141">The last set statement uses a new ternary operator that is introduced with the 0.3 update to support conditional expressions.</span></span>
<span data-ttu-id="b1f14-142">Uma expressão condicional é uma expressão da forma `condition ? caseTrue | caseFalse`.</span><span class="sxs-lookup"><span data-stu-id="b1f14-142">A conditional expression is an expression of the form `condition ? caseTrue | caseFalse`.</span></span>
<span data-ttu-id="b1f14-143">Como se pode ver pelo exemplo acima, a iteração sobre as matrizes é agora também apoiada.</span><span class="sxs-lookup"><span data-stu-id="b1f14-143">As can be seen from the example above, iteration over arrays is now also supported.</span></span>

<span data-ttu-id="b1f14-144">As dotações no âmbito `using` e `borrowing` são recentemente possíveis para qubits individuais, matrizes de qubit e tuples aninhados dos mesmos:</span><span class="sxs-lookup"><span data-stu-id="b1f14-144">Allocations within `using` and `borrowing` are newly possible for single qubits, qubit arrays, and nested tuples thereof:</span></span>
```qsharp
    using (qubit = Qubit()) {
        // qubit contains a single qubit
    }

    borrowing ((qubits, qubit) = (Qubit[3], Qubit())) {
        // qubits contains an array of three qubits, and qubit contains a single qubit
    }
```

<span data-ttu-id="b1f14-145">São introduzidas duas novas diretivas geradoras de especialização `invert` e `distribute`, para além de `auto`, para aumentar o controlo sobre a forma como as especializações de functores são geradas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-145">Two new specialization generator directives `invert` and `distribute` in addition to `auto` are introduced to increase control over how functor specializations are generated.</span></span>
<span data-ttu-id="b1f14-146">Uma declaração explícita do padrão `body` especialização dentro das operações já não é obrigatória.</span><span class="sxs-lookup"><span data-stu-id="b1f14-146">An explicit declaration of the default `body` specialization within operations is no longer mandatory.</span></span>
<span data-ttu-id="b1f14-147">Semelhante supor funções, as declarações podem ser diretamente adicionadas à própria declaração de operação se não for em funcionamento qualquer outra especialização.</span><span class="sxs-lookup"><span data-stu-id="b1f14-147">Similar to functions, statements may be directly added to the operation declaration itself if no other specialization is declared within the operation.</span></span>
<span data-ttu-id="b1f14-148">Um script de migração está incluído no lançamento para ajudar a migrar o código existente e tirar partido de novas funcionalidades linguísticas (ver a [secção sobre o script de migração).](#MigrationScript)</span><span class="sxs-lookup"><span data-stu-id="b1f14-148">A migration script is included in the release to help migrating existing code and taking advantage of new language features (see the [section on the migration script](#MigrationScript)).</span></span>

<span data-ttu-id="b1f14-149">Uma grande mudança na forma como os tipos definidos pelo utilizador são tratados vem com a atualização 0.3.</span><span class="sxs-lookup"><span data-stu-id="b1f14-149">A major change in how user-defined types are treated comes with the 0.3 update.</span></span> <span data-ttu-id="b1f14-150">Embora as libertações prévias do utilizador tenham definido os tipos como subtipos do seu tipo subjacente, este já não é o caso a seguir em frente (ver também a [secção sobre alterações](#BreakingChanges)de rutura).</span><span class="sxs-lookup"><span data-stu-id="b1f14-150">While prior releases treated user defined types as subtypes of their underlying type, this is no longer the case going forward (see also the [section on breaking changes](#BreakingChanges)).</span></span>  
<span data-ttu-id="b1f14-151">Como parte desta mudança introduzimos modificadores de expressão que podem ser aplicados a certas expressões.</span><span class="sxs-lookup"><span data-stu-id="b1f14-151">As part of this change we introduce expression modifiers that can be applied to certain expressions.</span></span> <span data-ttu-id="b1f14-152">As expressões "atómicas" a que os modificadores podem ser aplicados são identificadores, expressões de item de matriz e tuples arity-1.</span><span class="sxs-lookup"><span data-stu-id="b1f14-152">The "atomic" expressions that modifiers can be applied to are identifiers, array item expressions, and arity-1 tuples.</span></span>
<span data-ttu-id="b1f14-153">Os modificadores ligam-se mais apertado do que qualquer outro combinador de expressão e, em particular, mais apertado do que o combinador de expressão de chamada `(` `)`.</span><span class="sxs-lookup"><span data-stu-id="b1f14-153">Modifiers bind tighter than any other expression combinator, and in particular tighter than the call-expression combinator `(` `)`.</span></span> 
<span data-ttu-id="b1f14-154">`Adjoint`, `Controlled`, e um novo operador de pósfixo "desembrulhar" `!` são tratados como modificadores de expressão.</span><span class="sxs-lookup"><span data-stu-id="b1f14-154">`Adjoint`, `Controlled`, and a new "unwrap" postfix operator `!` are treated as expression modifiers.</span></span> <span data-ttu-id="b1f14-155">Tratar `Adjoint` e `Controlled` como modificadores de expressão elimina a necessidade de parênteses para muitos casos.</span><span class="sxs-lookup"><span data-stu-id="b1f14-155">Treating `Adjoint` and `Controlled` as expression modifiers eliminates the need for parenthesis for a lot of cases.</span></span> <span data-ttu-id="b1f14-156">As expressões abaixo, por exemplo, são válidas para `Op`, uma operação unitária, `opArr` um conjunto de operações unitárias, e `arg` um argumento adequado:</span><span class="sxs-lookup"><span data-stu-id="b1f14-156">The expressions below for example are valid going forward for `Op`, a unitary operation, `opArr` an array of unitary operations, and `arg` a suitable argument:</span></span> 
```qsharp
    Adjoint Op (arg);
    Controlled opArr[i] (arg);
```
<span data-ttu-id="b1f14-157">O roteiro de migração vai deixar cair a maior parte dos parênteses desnecessários e tirar o máximo partido das novas funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="b1f14-157">The migration script will drop most of the unnecessary parenthesis and take full advantage of the new features.</span></span> <span data-ttu-id="b1f14-158">No entanto, esteja avisado de que o script não interpreta o código, e não terá em conta a interpretação diferente do functor `Controlled` em casos raros (apenas relevante em combinação com aplicações parciais).</span><span class="sxs-lookup"><span data-stu-id="b1f14-158">However, be advised that the script does not interpret the code, and will not account for the different interpretation of the `Controlled` functor in rare cases (only relevant in combination with partial applications).</span></span>

<span data-ttu-id="b1f14-159">O novo modificador `!` lança um tipo definido pelo utilizador para o seu tipo subjacente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-159">The new modifier `!` casts a user-defined type to its underlying type.</span></span> <span data-ttu-id="b1f14-160">Este elenco foi considerado um upcast em lançamentos anteriores e foi executado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-160">This cast has been considered an upcast in previous releases and was executed automatically.</span></span> <span data-ttu-id="b1f14-161">Com a nova interpretação dos tipos definidos pelo utilizador, este já não é o caso e o elenco tem de ser explicitado.</span><span class="sxs-lookup"><span data-stu-id="b1f14-161">With the new interpretation of user defined types this is no longer the case and the cast needs to be made explicit.</span></span>    
<span data-ttu-id="b1f14-162">O exemplo que se segue ilustra como utilizar o novo modificador:</span><span class="sxs-lookup"><span data-stu-id="b1f14-162">The following example illustrates how to use the new modifier:</span></span> 
```qsharp
    newtype Unitary = (Qubit => Unit: Adjoint, Controlled);

    operation Foo (unitaries : Unitary[], qubit : Qubit) : Unit {

        for (unitary in unitaries[1 .. Length(unitaries)-1]) {
            // Each element of unitaries is an instance of the user-defined
            // type Unitary, so unitary! unwraps each element to an operation
            // type that we can call.
            unitary! (qubit);
            // The unwrap operator can also be used as a part of functor
            // expressions and when indexing into arrays.
            Adjoint unitary! (qubit);
            Adjoint unitaries[0]! (qubit);
        }
    }
```
<span data-ttu-id="b1f14-163">Como se pode ver pelo exemplo, `!` se liga mais apertado do que os modificadores prefixos, como `Controlled` e `Adjoint`.</span><span class="sxs-lookup"><span data-stu-id="b1f14-163">As can be seen from the example, `!` binds tighter than prefix modifiers, like `Controlled` and `Adjoint`.</span></span>

## <a name="BreakingChanges"></a><span data-ttu-id="b1f14-164">Alterações de rutura</span><span class="sxs-lookup"><span data-stu-id="b1f14-164">Breaking Changes</span></span> 

<span data-ttu-id="b1f14-165">A atualização 0.3 vem com um novo compilador e contém um punhado de mudanças de rutura.</span><span class="sxs-lookup"><span data-stu-id="b1f14-165">The 0.3 update comes with a new compiler and contains a handful of breaking changes.</span></span>
<span data-ttu-id="b1f14-166">Para facilitar a atualização do código existente, o compilador também fornece uma opção de formatação que compila código válido ou inválido e emite código Q# formado com base na compilação construída.</span><span class="sxs-lookup"><span data-stu-id="b1f14-166">To facilitate updating existing code, the compiler also provides a formatting option that compiles valid or invalid code and emits formatted Q# code based on the built compilation.</span></span>
<span data-ttu-id="b1f14-167">Todas as alterações de sintaxe serão processadas automaticamente pela ferramenta fornecida.</span><span class="sxs-lookup"><span data-stu-id="b1f14-167">All syntax changes will be processed automatically by the provided tool.</span></span> <span data-ttu-id="b1f14-168">No entanto, as alterações na forma como o código válido é interpretado (alterações semânticas) podem ter de ser feitas manualmente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-168">However, changes in how valid code is interpreted (semantic changes) may need to be made manually.</span></span> 

<span data-ttu-id="b1f14-169">Além das alterações listadas abaixo, o padrão `__*__` onde \* é qualquer sequência de caracteres não-espaciais é reservado para uso interno e não pode ser usado como um nome de símbolo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-169">In addition to the changes listed below, the pattern `__*__` where \* is any sequence of non-whitespace characters is reserved for internal use and cannot be used as a symbol name.</span></span>  

## <a name="syntax-changes"></a><span data-ttu-id="b1f14-170">Alterações de Sintaxe</span><span class="sxs-lookup"><span data-stu-id="b1f14-170">Syntax Changes</span></span> 

- <span data-ttu-id="b1f14-171">A partir da versão 0.3, os itens de matriz já não são separados por pontos evímetros, mas são separados por vírgulas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-171">Starting with the version 0.3, array items are no longer separated by semicolons, but are separated by commas instead.</span></span>
- <span data-ttu-id="b1f14-172">Por outro lado, é necessário um ponto evícito após uma diretiva relativa à produção automática de declarações de especialização.</span><span class="sxs-lookup"><span data-stu-id="b1f14-172">A semicolon on the other hand is required after an auto-generation directive for specialization declarations.</span></span>
- <span data-ttu-id="b1f14-173">As condições em se-, elif-, e até que as cláusulas devem ser encapsuladas em parênteses.</span><span class="sxs-lookup"><span data-stu-id="b1f14-173">Conditions in if-, elif-, and until-clauses need to be encapsulated in parenthesis.</span></span> 

<span data-ttu-id="b1f14-174">Para todas as outras alterações de sintaxe, o compilador irá simplesmente gerar um aviso se a antiga sintaxe for utilizada.</span><span class="sxs-lookup"><span data-stu-id="b1f14-174">For all other syntax changes the compiler will simply generate a warning if the old syntax is used.</span></span>     
<span data-ttu-id="b1f14-175">Um exemplo para tal mudança é o símbolo tuple em especializações definidas pelo utilizador.</span><span class="sxs-lookup"><span data-stu-id="b1f14-175">One example for such a change is the symbol tuple in user-defined specializations.</span></span> <span data-ttu-id="b1f14-176">Embora em lançamentos anteriores uma declaração de especialização comperejá-a djoint controlada ou controlada especificasse um único argumento de símbolo, a partir de 0.3 é encorajado a fornecer tal túnica de símbolo para toda a especialização com `...` indicando que o compilador deve migrar os símbolos da declaração calúgica, se necessário.</span><span class="sxs-lookup"><span data-stu-id="b1f14-176">While in previous releases a controlled or controlled-adjoint specialization declaration specified a single symbol argument, starting in 0.3 it is encouraged to provide such a symbol tuple for all specialization with `...` indicating that the compiler should migrate the symbols from the callable declaration if needed.</span></span> 

## <a name="semantic-changes"></a><span data-ttu-id="b1f14-177">Alterações Semânticas</span><span class="sxs-lookup"><span data-stu-id="b1f14-177">Semantic Changes</span></span> 

<span data-ttu-id="b1f14-178">A rutura mais impactante para a versão 0.3 é a forma como os tipos definidos pelo utilizador são integrados no sistema de tipo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-178">The most impactful breaking for the 0.3 release is how user-defined types are integrated into the type system.</span></span> <span data-ttu-id="b1f14-179">Em lançamentos anteriores, os tipos definidos pelo utilizador foram considerados um subtipo do seu tipo subjacente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-179">In prior releases user defined types were considered to be a subtype of their underlying type.</span></span> <span data-ttu-id="b1f14-180">Com esta libertação e a avançar, este já não é o caso.</span><span class="sxs-lookup"><span data-stu-id="b1f14-180">With this release and going forward this is no longer the case.</span></span> <span data-ttu-id="b1f14-181">Os tipos definidos pelo utilizador são agora considerados como o seu próprio tipo distinto, e não existe um elenco automático entre um tipo definido pelo utilizador e o seu tipo subjacente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-181">User defined types are now considered to be their own distinct type, and no automatic cast between a user defined type and its underlying type exists.</span></span> <span data-ttu-id="b1f14-182">Todos os moldes devem ser explicitados através de um operador "desembrulhar" `!`, e é necessário um molde em particular para aceder ao conteúdo de um objeto de tipo definido pelo utilizador.</span><span class="sxs-lookup"><span data-stu-id="b1f14-182">All casts need to be made explicit via an "unwrap" operator `!`, and a cast is needed in particular to access the content of a object of user defined type.</span></span>  

<span data-ttu-id="b1f14-183">As modificações no sistema de tipo também incluem o comportamento de variação das matrizes, e o tratamento de objetos parametrizados tipo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-183">The modifications to the type system also include the variance behavior of arrays, and the treatment of type parameterized objects.</span></span> <span data-ttu-id="b1f14-184">A partir de 0,3, as matrizes mutáveis e imutáveis são invariantes.</span><span class="sxs-lookup"><span data-stu-id="b1f14-184">Starting in 0.3, both mutable and immutable arrays are invariant.</span></span> <span data-ttu-id="b1f14-185">Além disso, os argumentos transmitidos a um callable não podem ser parâmetros do tipo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-185">Additionally, arguments passed to a callable cannot be type parameterized.</span></span> <span data-ttu-id="b1f14-186">Nestes casos, os argumentos de tipo devem ser transmitidos juntamente com o identificador.</span><span class="sxs-lookup"><span data-stu-id="b1f14-186">In these cases, type arguments must be passed along with the identifer.</span></span>

<span data-ttu-id="b1f14-187">As versões anteriores do compilador Q# permitiram fornecer um valor de função quando se esperava um valor de operação, desde que o valor da função tivesse os tipos de entrada e saída corretos.</span><span class="sxs-lookup"><span data-stu-id="b1f14-187">Previous releases of the Q# compiler allowed a function value to be provided where an operation value was expected, as long as the function value had the correct input and output types.</span></span> <span data-ttu-id="b1f14-188">Este foi um comportamento não intencional que não é especificado na especificação da língua Q#.</span><span class="sxs-lookup"><span data-stu-id="b1f14-188">This was unintended behavior that is not specified in the Q# language specification.</span></span>
<span data-ttu-id="b1f14-189">No compilador 0.3, removemos este comportamento para que os valores de função deixem de ser considerados valores de funcionamento.</span><span class="sxs-lookup"><span data-stu-id="b1f14-189">In the 0.3 compiler, we have removed this behavior so that function values are no longer considered operation values.</span></span>
<span data-ttu-id="b1f14-190">Para minimizar a perturbação do código existente que se baseava neste bug, adicionámos a função ToOperation no espaço de nome Microsoft.Quantum.Canon que converterá explicitamente uma função numa operação com os mesmos tipos de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="b1f14-190">To minimize the disruption to existing code that relied on this bug, we have added the ToOperation function in the Microsoft.Quantum.Canon namespace that will explicitly convert a function into an operation with the same input and output types.</span></span>

<span data-ttu-id="b1f14-191">O exemplo que se segue ilustra como utilizar a função `ToOperation` para alterar uma função `Square` a uma operação `op`:</span><span class="sxs-lookup"><span data-stu-id="b1f14-191">The following example illustrates how to use the `ToOperation` function to change a function `Square` to an operation `op`:</span></span> 
```qsharp
namespace Microsoft.Quantum.Tests {
    open Microsoft.Quantum.Primitive;
    open Microsoft.Quantum.Canon;

    function Square(x : Int) : Int {
        return x * x;
    }

    operation ApplyOp<'T, 'U>(op : ('T => 'U), input : 'T) : 'U {
        return op(input);
    }

    operation ToOperationTest() : Unit {
        let op = ToOperation(Square);
        AssertIntEqual(ApplyOp(op, 3), 9, "ToOperation failed with Square.");
    }
}
```

## <a name="requirements"></a><span data-ttu-id="b1f14-192">Requisitos</span><span class="sxs-lookup"><span data-stu-id="b1f14-192">Requirements</span></span> 

<span data-ttu-id="b1f14-193">O lançamento é suportado no Visual Studio 2017 versão 15.8 ou posterior para windows 10, e no Visual Studio Code versão 1.27.2 ou mais tarde para Windows 10, macOS e Linux.</span><span class="sxs-lookup"><span data-stu-id="b1f14-193">The release is supported on Visual Studio 2017 version 15.8 or later for Windows 10, and on Visual Studio Code version 1.27.2 or later for Windows 10, macOS, and Linux.</span></span>

<span data-ttu-id="b1f14-194">O Kit de Desenvolvimento Quântico utiliza o .NET Core SDK (2.0 ou mais tarde).</span><span class="sxs-lookup"><span data-stu-id="b1f14-194">The Quantum Development Kit uses the .NET Core SDK (2.0 or later).</span></span>

## <a name="installation"></a><span data-ttu-id="b1f14-195">Instalação</span><span class="sxs-lookup"><span data-stu-id="b1f14-195">Installation</span></span>  

<span data-ttu-id="b1f14-196">Siga as instruções de instalação [aqui](../install-guide/index.md).</span><span class="sxs-lookup"><span data-stu-id="b1f14-196">Follow the installation instructions [here](../install-guide/index.md).</span></span>

<span data-ttu-id="b1f14-197">Pode ver avisos ("Encontrados conflitos entre diferentes versões de "System.Reflection.Metadata" que não poderiam ser resolvidos.") se a sua versão atual de .NET Core SDK não estiver atualizada.</span><span class="sxs-lookup"><span data-stu-id="b1f14-197">You may see warnings ("Found conflicts between different versions of "System.Reflection.Metadata" that could not be resolved.") if your current version of .NET Core SDK is not up to date.</span></span>  <span data-ttu-id="b1f14-198">No entanto, se estiver a utilizar o .NET Core SDK (2.0 ou mais tarde), estas advertências podem ser ignoradas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-198">However, if you are using .NET Core SDK (2.0 or later), these warnings may be ignored.</span></span>


- <span data-ttu-id="b1f14-199">O lançamento é fornecido juntamente com uma série de amostras diferentes que mostram como usar ambas as funcionalidades existentes do Kit de Desenvolvimento Quântico, e as novas funcionalidades disponíveis com esta versão.</span><span class="sxs-lookup"><span data-stu-id="b1f14-199">The release is provided along with a number of different samples showing how to use both existing features of the Quantum Development Kit, and the new features available with this release.</span></span> <span data-ttu-id="b1f14-200">Estas amostras podem ser encontradas no GitHub no repositório [Microsoft/Quantum.](https://github.com/Microsoft/Quantum)</span><span class="sxs-lookup"><span data-stu-id="b1f14-200">These samples can be can be found on GitHub at the [Microsoft/Quantum](https://github.com/Microsoft/Quantum) repository.</span></span>


## <a name="Migration"></a><span data-ttu-id="b1f14-201">Migração de projetos existentes para o Q#0.3</span><span class="sxs-lookup"><span data-stu-id="b1f14-201">Migrating Existing Projects to Q# 0.3</span></span> 

<span data-ttu-id="b1f14-202">Se tiver os projetos Q# existentes a partir da versão 0.2 do Kit de Desenvolvimento Quântico, seguem-se os passos para migrar esses projetos para a versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-202">If you have existing Q# projects from version 0.2 of the Quantum Development Kit, the following are the steps to migrate those projects to the newest version.</span></span> <span data-ttu-id="b1f14-203">Também fornecemos um [roteiro de migração](#MigrationScript) para ajudá-lo com o processo.</span><span class="sxs-lookup"><span data-stu-id="b1f14-203">We also provide a [migration script](#MigrationScript) to help you with the process.</span></span>

> [!NOTE]
> <span data-ttu-id="b1f14-204">Os projetos precisam de ser atualizados por ordem.</span><span class="sxs-lookup"><span data-stu-id="b1f14-204">Projects need to be upgraded in order.</span></span> <span data-ttu-id="b1f14-205">Se tiver uma solução com vários projetos atualizar cada projeto na ordem, são referenciados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-205">If you have a solution with multiple projects update each project in the order they are referenced.</span></span>


1. <span data-ttu-id="b1f14-206">Numa linha de comandos, execute `dotnet clean` para remover todos ficheiros intermediários e binários existentes.</span><span class="sxs-lookup"><span data-stu-id="b1f14-206">From a command line, Run `dotnet clean` to remove all existing binaries and intermediate files.</span></span>
2. <span data-ttu-id="b1f14-207">Num editor de texto, edite o ficheiro .csproj para alterar a versão de todos os `PackageReference` "Microsoft.Quantum" para a versão 0.3.1811.2802-pré-visualização, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="b1f14-207">In a text editor, edit the .csproj file to change the version of all the "Microsoft.Quantum" `PackageReference` to version 0.3.1811.2802-preview, for example:</span></span>
```xml
    <PackageReference Include="Microsoft.Quantum.Canon" Version="0.3.1811.2802" />
    <PackageReference Include="Microsoft.Quantum.Development.Kit" Version="0.3.1811.2802" />
```
4. <span data-ttu-id="b1f14-208">A partir da linha de comando, utilize a ferramenta de formatação integrada no compilador de linha de comando para abordar todas as alterações de sintaxe executando este comando: `dotnet msbuild /t:qsharpformat`</span><span class="sxs-lookup"><span data-stu-id="b1f14-208">From the command line, use the formatting tool integrated into the command line compiler to address all syntax changes by running this command: `dotnet msbuild /t:qsharpformat`</span></span>  
    - <span data-ttu-id="b1f14-209">Os seus ficheiros serão migrados no local.</span><span class="sxs-lookup"><span data-stu-id="b1f14-209">Your files will be migrated in-place.</span></span> <span data-ttu-id="b1f14-210">Uma cópia de todos os ficheiros originais de todos os ficheiros originais será copiada para `obj\qsharp\.backup`</span><span class="sxs-lookup"><span data-stu-id="b1f14-210">A backup of all the original files will be copied to `obj\qsharp\.backup`</span></span>
    - <span data-ttu-id="b1f14-211">A ferramenta de formatação irá compilar o projeto ignorando todos os erros de compilação e gerando código Q# formado com base na compilação de construção.</span><span class="sxs-lookup"><span data-stu-id="b1f14-211">The formatting tool will compile the project ignoring all compilation errors and generate formatted Q# code based on the build compilation.</span></span> 
       <span data-ttu-id="b1f14-212">Qualquer símbolo não reconhecido (por exemplo, um nome variável indefinido) será substituído por um texto do espaço reservado que precisa de ser substituído manualmente após a formatação.</span><span class="sxs-lookup"><span data-stu-id="b1f14-212">Any unrecognized symbol (e.g. an undefined variable name) will be replaced by a placeholder text that needs to be replaced manually after formatting.</span></span> <span data-ttu-id="b1f14-213">Neste caso, a formatação tem sucesso ao mesmo tempo que gera um aviso para o ficheiro afetado.</span><span class="sxs-lookup"><span data-stu-id="b1f14-213">In this case, the formatting succeeds while generating a warning for the affected file.</span></span>     
    - <span data-ttu-id="b1f14-214">A formatação e, em particular, qualquer espaço branco no ficheiro serão alterados no código emitido.</span><span class="sxs-lookup"><span data-stu-id="b1f14-214">The formatting and in particular any white space in the file will be changed in the emitted code.</span></span> <span data-ttu-id="b1f14-215">Os comentários serão preservados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-215">Comments will be preserved.</span></span>   
5. <span data-ttu-id="b1f14-216">Depois de executar isto, você ainda pode precisar de abordar manualmente as mudanças semânticas nos casos em que a interpretação semântica do código mudou.</span><span class="sxs-lookup"><span data-stu-id="b1f14-216">After running this, you might still need to manually address semantic changes in cases where the semantic interpretation of the code has changed.</span></span> <span data-ttu-id="b1f14-217">Todos estes erros serão relatados pela IntelliSense em Visual Studio ou Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="b1f14-217">All these errors will be reported by IntelliSense in Visual Studio or Visual Studio Code.</span></span>
    - <span data-ttu-id="b1f14-218">Abra a pasta raiz do projeto ou a solução contendo no Visual Studio 2017 ou visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="b1f14-218">Open the root folder of the project or the containing solution in Visual Studio 2017 or Visual Studio Code.</span></span>
    - <span data-ttu-id="b1f14-219">Depois de abrir um ficheiro .qs no editor, verá o resultado da extensão de linguagem Q# na janela de resultados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-219">After opening a .qs file in the editor, you should see the output of the Q# language extension in the output window.</span></span>
    - <span data-ttu-id="b1f14-220">Depois de carregar o projeto com êxito (indicado na janela de resultados), abra cada ficheiro manualmente para resolver todos os problemas restantes.</span><span class="sxs-lookup"><span data-stu-id="b1f14-220">After the project has loaded successfully (indicated in the output window) open each file and manually to address all remaining issues.</span></span>


> [!NOTE]
> * <span data-ttu-id="b1f14-221">Para o lançamento 0.3, o servidor de idiomas incluído no Kit de Desenvolvimento Quântico não suporta vários espaços de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b1f14-221">For the 0.3 release, the language server included with the Quantum Development Kit does not support multiple workspaces.</span></span>
> * <span data-ttu-id="b1f14-222">Para trabalhar com um projeto no Visual Studio Code, abra a pasta raiz que contém o projeto em si e todos os projetos referenciados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-222">In order to work with a project in Visual Studio Code, open the root folder containing the project itself and all referenced projects.</span></span>   
> * <span data-ttu-id="b1f14-223">Para poder trabalhar com uma solução no Visual Studio, todos os projetos contidos na solução têm de estar na mesma pasta que a solução ou numa das suas subpastas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-223">In order to work with a solution in Visual Studio, all projects contained in the solution need to be in the same folder as the solution or in one of its subfolders.</span></span>  
> * <span data-ttu-id="b1f14-224">**Não** são apoiadas referências entre projetos migrados para 0,3 e projetos que utilizem versões de pacotes mais antigas.</span><span class="sxs-lookup"><span data-stu-id="b1f14-224">References between projects migrated to 0.3 and higher and projects using older package versions are **not** supported.</span></span>




## <a name="MigrationScript"></a><span data-ttu-id="b1f14-225">Roteiro de migração</span><span class="sxs-lookup"><span data-stu-id="b1f14-225">Migration script</span></span> 

<span data-ttu-id="b1f14-226">Para facilitar a migração do projeto, é fornecido um script PowerShell que pode ser descarregado [aqui](https://raw.githubusercontent.com/Microsoft/Quantum/release/v0.3.1810/utilities/qdk-migrate.ps1).</span><span class="sxs-lookup"><span data-stu-id="b1f14-226">In order to facilitate project migration, a PowerShell script is provided that can be downloaded [here](https://raw.githubusercontent.com/Microsoft/Quantum/release/v0.3.1810/utilities/qdk-migrate.ps1).</span></span>
<span data-ttu-id="b1f14-227">Este guião ajuda a migrar projetos da versão 0.2 do Kit de Desenvolvimento Quântico para utilizar a versão 0.3.</span><span class="sxs-lookup"><span data-stu-id="b1f14-227">This script helps migrate projects from version 0.2 of the Quantum Development Kit to use version 0.3.</span></span>

> [!NOTE]
> <span data-ttu-id="b1f14-228">O script de migração requer que o Windows PowerShell ou o PowerShell Core sejam executados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-228">The migration script requires Windows PowerShell or PowerShell Core to run.</span></span>
> <span data-ttu-id="b1f14-229">O Windows PowerShell vem pré-instalado com o Windows 10.</span><span class="sxs-lookup"><span data-stu-id="b1f14-229">Windows PowerShell comes pre-installed with Windows 10.</span></span>
> <span data-ttu-id="b1f14-230">Baixe powerShell Core para Windows, macOS ou Linux em https://github.com/PowerShell/PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b1f14-230">Download PowerShell Core for Windows, macOS, or Linux at https://github.com/PowerShell/PowerShell.</span></span>

<span data-ttu-id="b1f14-231">O guião executa os seguintes quatro passos:</span><span class="sxs-lookup"><span data-stu-id="b1f14-231">The script executes the following four steps:</span></span>

- <span data-ttu-id="b1f14-232">O projeto é construído com a versão anterior do Kit de Desenvolvimento Quântico para garantir que a migração é suscetível de ser bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="b1f14-232">The project is built with the previous version of the Quantum Development Kit to ensure that migration is likely to succeed.</span></span> <span data-ttu-id="b1f14-233">Este passo pode ser ignorado utilizando o parâmetro `-Force` para o script.</span><span class="sxs-lookup"><span data-stu-id="b1f14-233">This step can be skipped by using the `-Force` parameter to the script.</span></span>
- <span data-ttu-id="b1f14-234">Novos modelos de projeto estão instalados.</span><span class="sxs-lookup"><span data-stu-id="b1f14-234">New project templates are installed.</span></span>
- <span data-ttu-id="b1f14-235">O projeto é atualizado para usar a versão atual do Kit de Desenvolvimento Quântico.</span><span class="sxs-lookup"><span data-stu-id="b1f14-235">The project is updated to use the current version of the Quantum Development Kit.</span></span>
- <span data-ttu-id="b1f14-236">A ferramenta de formatação fornecida com a versão 0.3 do Kit de Desenvolvimento Quântico é aplicada para abordar automaticamente a maioria das alterações de rutura documentadas acima.</span><span class="sxs-lookup"><span data-stu-id="b1f14-236">The formatting tool provided with version 0.3 of the Quantum Development Kit is applied to automatically address most of the breaking changes documented above.</span></span>

<span data-ttu-id="b1f14-237">Após estes quatro passos concluídos, pode haver algumas questões de migração restantes que devem ser tratadas manualmente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-237">After these four steps complete, there may be some remaining migration issues which must be handled manually.</span></span>
<span data-ttu-id="b1f14-238">Usar a versão mais recente das extensões do Quantum Development Kit para visual studio 2017 e Visual Studio Code pode ajudar a encontrar estes problemas facilmente.</span><span class="sxs-lookup"><span data-stu-id="b1f14-238">Using the latest version of the Quantum Development Kit extensions for Visual Studio 2017 and Visual Studio Code can help find these issues easily.</span></span>

<span data-ttu-id="b1f14-239">A documentação para o script pode ser obtida executando um dos seguintes comandos na pasta onde o script está localizado:</span><span class="sxs-lookup"><span data-stu-id="b1f14-239">The documentation for the script can be obtained by running one of the following commands in the folder where the script is located:</span></span>

```powershell
Get-Help ./qdk-migrate.ps1
Get-Help -Online ./qdk-migrate.ps1
```

> [!NOTE]
> <span data-ttu-id="b1f14-240">Por predefinição, o Windows impede a execução de quaisquer scripts como medida de segurança.</span><span class="sxs-lookup"><span data-stu-id="b1f14-240">By default, Windows prevents the execution of any scripts as a security measure.</span></span>
> <span data-ttu-id="b1f14-241">Para permitir que scripts como `qdk-migrate.ps1` a ser executados no Windows, poderá ter de alterar a política de execução.</span><span class="sxs-lookup"><span data-stu-id="b1f14-241">To allow scripts such as `qdk-migrate.ps1` to run on Windows, you may need to change the execution policy.</span></span>
> <span data-ttu-id="b1f14-242">Para isso, dirija o comando `Set-ExecutionPolicy`:</span><span class="sxs-lookup"><span data-stu-id="b1f14-242">To do so, run the `Set-ExecutionPolicy` command:</span></span>
> ```powershell
> Set-ExecutionPolicy RemoteSigned -Scope Process
> ```
> <span data-ttu-id="b1f14-243">A política de execução será revertida quando sair da PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b1f14-243">The execution policy will then be reverted when you exit PowerShell.</span></span>
> <span data-ttu-id="b1f14-244">Se quiser salvar a política de execução, utilize um valor diferente para `-Scope`:</span><span class="sxs-lookup"><span data-stu-id="b1f14-244">If you would like to save the execution policy, use a different value for `-Scope`:</span></span>
> ```powershell
> Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
> ```

